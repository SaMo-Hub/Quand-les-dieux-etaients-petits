// translations.js - Système de traduction complet

const translations = {
  fr: {
    // Navigation
    'chapitre-1': 'L\'enfant de la prophétie',
    'chapitre-2': 'Le choc des Titans',
    
    // Chapitre 1
    'intro-text': 'On m\'a raconté que mes grands-parents, Gaïa et Ouranos, avaient créé les Titans.',
    'ambiance-text': 'Un jour, il a décidé que son père était de trop et l\'a renversé pour prendre sa place. Voilà. Ambiance familiale sympa, hein ?',
    'prophecy-intro': 'Mais juste après ça, Gaïa lui a lancé la phrase qui a gâché toutes ses nuits :',
    'prophecy-text': 'Un de tes enfants sera plus fort que toi.',
    'obsession-text': 'Et là, croyez-moi, mon père n\'a plus pensé à rien d\'autre. Pas aux bisous, pas aux anniversaires… Juste à sa future défaite.',
    'siblings-text': 'Mes frères et sœurs naissaient, et mon père les faisait disparaître aussitôt. Un, deux, trois, quatre, cinq. Ma mère Rhéa pleurait, mais se taisait.',
    'rhea-decision': 'Plus jamais.',
    'birth-text': 'Je suis né dans une grotte sombre de Crète. Avec une chèvre sacrée pour nounou, Amalthée, et des guerriers, les Curètes, qui frappaient leurs boucliers pour couvrir mes pleurs.',
    'stone-trick': 'Pendant ce temps, ma mère tendait à Cronos une pierre enveloppée dans un linge pour lui faire croire que c\'était moi. Il y crut. Grâce à cette ruse, je pus grandir en sécurité.',
    
    // Chapitre 2
    'growing-up': 'En grandissant, je me suis dit : « Ok, Zeus, il est temps d\'agir. » J\'ai retrouvé Métis, l\'océanide la plus rusée de toutes.',
    'potion-text': 'Métis m\'a donné une potion qui ferait vomir un géant. Je me suis déguisé en serviteur et je l\'ai servie à Cronos.',
    'vomit-text': 'Il recracha mes frères et sœurs : Hestia, Déméter, Héra, Hadès et Poséidon. Mais nous n\'avions pas encore la force de vaincre les Titans.',
    'tartarus-text': 'Sur les conseils de Gaïa, je descendis dans le Tartare, là où Cronos avait enfermé les Cyclopes et les Hécatonchires. Je brisai leurs chaînes, et en échange...',
    'weapons-text': 'ils nous ont offert trois armes incroyables :\n\nma foudre,\n\nle trident,\n\nle casque d\'ombre.',
    'lightning-text': 'Je lançais mes éclairs,',
    'end-battle': 'Quand la bataille prit fin, les Titans étaient à genoux.\n\nOn ne voulait plus qu\'ils puissent refaire du mal à qui que ce soit.\nAlors on les a enchaînés et envoyés tout au fond du Tartare',
    'division-text': 'Une fois la bataille terminée, on s\'est rassemblés tous les trois pour décider qui allait diriger quoi.\n\nOn a choisi un tirage, simple et sans triche on avait eu assez de conflits comme ça.',
    'realms-text': 'Poséidon a hérité de la Mer,\nHadès des Enfers,\net moi, du Ciel.',
    
    // Modal langue
    'choose-language': 'Choisis ta langue'
  },
  
  en: {
    // Navigation
    'chapitre-1': 'The Child of Prophecy',
    'chapitre-2': 'The Clash of Titans',
    
    // Chapter 1
    'intro-text': 'I was told that my grandparents, Gaia and Uranus, had created the Titans.',
    'ambiance-text': 'One day, he decided that his father was too much and overthrew him to take his place. There you go. Nice family atmosphere, right?',
    'prophecy-intro': 'But right after that, Gaia threw him the phrase that ruined all his nights:',
    'prophecy-text': 'One of your children will be stronger than you.',
    'obsession-text': 'And there, believe me, my father thought of nothing else. Not kisses, not birthdays... Just his future defeat.',
    'siblings-text': 'My brothers and sisters were born, and my father made them disappear immediately. One, two, three, four, five. My mother Rhea cried, but kept silent.',
    'rhea-decision': 'Never again.',
    'birth-text': 'I was born in a dark cave in Crete. With a sacred goat as a nanny, Amalthea, and warriors, the Curetes, who beat their shields to cover my cries.',
    'stone-trick': 'Meanwhile, my mother handed Cronus a stone wrapped in cloth to make him believe it was me. He believed it. Thanks to this trick, I was able to grow up safely.',
    
    // Chapter 2
    'growing-up': 'Growing up, I thought: "Ok, Zeus, it\'s time to act." I found Metis, the most cunning oceanid of all.',
    'potion-text': 'Metis gave me a potion that would make a giant vomit. I disguised myself as a servant and served it to Cronus.',
    'vomit-text': 'He regurgitated my brothers and sisters: Hestia, Demeter, Hera, Hades and Poseidon. But we still didn\'t have the strength to defeat the Titans.',
    'tartarus-text': 'On Gaia\'s advice, I descended into Tartarus, where Cronus had locked up the Cyclopes and the Hecatoncheires. I broke their chains, and in return...',
    'weapons-text': 'they offered us three incredible weapons:\n\nmy lightning,\n\nthe trident,\n\nthe shadow helmet.',
    'lightning-text': 'I threw my lightning bolts,',
    'end-battle': 'When the battle ended, the Titans were on their knees.\n\nWe didn\'t want them to be able to hurt anyone again.\nSo we chained them and sent them to the depths of Tartarus',
    'division-text': 'Once the battle was over, the three of us gathered to decide who would rule what.\n\nWe chose a draw, simple and without cheating we had had enough conflicts like that.',
    'realms-text': 'Poseidon inherited the Sea,\nHades the Underworld,\nand me, the Sky.',
    
    // Language modal
    'choose-language': 'Choose your language'
  },
  
  el: {
    // Navigation
    'chapitre-1': 'Το Παιδί της Προφητείας',
    'chapitre-2': 'Η Σύγκρουση των Τιτάνων',
    
    // Chapter 1
    'intro-text': 'Μου είπαν ότι οι παππούδες μου, η Γαία και ο Ουρανός, είχαν δημιουργήσει τους Τιτάνες.',
    'ambiance-text': 'Μια μέρα, αποφάσισε ότι ο πατέρας του ήταν περιττός και τον ανέτρεψε για να πάρει τη θέση του. Ορίστε. Ωραία οικογενειακή ατμόσφαιρα, έτσι δεν είναι;',
    'prophecy-intro': 'Αλλά αμέσως μετά από αυτό, η Γαία του είπε τη φράση που κατέστρεψε όλες τις νύχτες του:',
    'prophecy-text': 'Ένα από τα παιδιά σου θα είναι πιο δυνατό από εσένα.',
    'obsession-text': 'Και εκεί, πιστέψτε με, ο πατέρας μου δεν σκεφτόταν τίποτα άλλο. Όχι φιλιά, όχι γενέθλια... Μόνο την μελλοντική του ήττα.',
    'siblings-text': 'Τα αδέλφια μου γεννιόντουσαν, και ο πατέρας μου τα έκανε να εξαφανιστούν αμέσως. Ένα, δύο, τρία, τέσσερα, πέντε. Η μητέρα μου Ρέα έκλαιγε, αλλά σιωπούσε.',
    'rhea-decision': 'Ποτέ ξανά.',
    'birth-text': 'Γεννήθηκα σε μια σκοτεινή σπηλιά στην Κρήτη. Με μια ιερή κατσίκα ως νταντά, την Αμάλθεια, και πολεμιστές, τους Κουρήτες, που χτυπούσαν τις ασπίδες τους για να καλύψουν τα κλάματά μου.',
    'stone-trick': 'Εν τω μεταξύ, η μητέρα μου έδινε στον Κρόνο μια πέτρα τυλιγμένη σε ύφασμα για να τον κάνει να πιστέψει ότι ήμουν εγώ. Το πίστεψε. Χάρη σε αυτό το τέχνασμα, μπόρεσα να μεγαλώσω με ασφάλεια.',
    
    // Chapter 2
    'growing-up': 'Μεγαλώνοντας, σκέφτηκα: "Εντάξει, Δία, ήρθε η ώρα να δράσεις." Βρήκα τη Μήτιδα, την πιο πονηρή ωκεανίδα όλων.',
    'potion-text': 'Η Μήτιδα μου έδωσε ένα φίλτρο που θα έκανε έναν γίγαντα να κάνει εμετό. Μεταμφιέστηκα σε υπηρέτη και το σέρβιρα στον Κρόνο.',
    'vomit-text': 'Ξερνούσε τα αδέλφια μου: Εστία, Δήμητρα, Ήρα, Άδης και Ποσειδώνας. Αλλά δεν είχαμε ακόμα τη δύναμη να νικήσουμε τους Τιτάνες.',
    'tartarus-text': 'Με τη συμβουλή της Γαίας, κατέβηκα στον Τάρταρο, όπου ο Κρόνος είχε φυλακίσει τους Κύκλωπες και τους Εκατόγχειρες. Έσπασα τις αλυσίδες τους, και σε αντάλλαγμα...',
    'weapons-text': 'μας πρόσφεραν τρία απίστευτα όπλα:\n\nτον κεραυνό μου,\n\nτην τρίαινα,\n\nτο κράνος του σκότους.',
    'lightning-text': 'Έριξα τους κεραυνούς μου,',
    'end-battle': 'Όταν η μάχη τελείωσε, οι Τιτάνες ήταν στα γόνατα.\n\nΔεν θέλαμε να μπορούν να βλάψουν ξανά κανέναν.\nΈτσι τους αλυσοδέσαμε και τους στείλαμε στα βάθη του Τάρταρου',
    'division-text': 'Μόλις τελείωσε η μάχη, μαζευτήκαμε οι τρεις για να αποφασίσουμε ποιος θα κυβερνούσε τι.\n\nΕπιλέξαμε κλήρωση, απλή και χωρίς εξαπάτηση είχαμε αρκετές συγκρούσεις έτσι.',
    'realms-text': 'Ο Ποσειδώνας κληρονόμησε τη Θάλασσα,\nο Άδης τον Κάτω Κόσμο,\nκι εγώ, τον Ουρανό.',
    
    // Language modal
    'choose-language': 'Επιλέξτε τη γλώσσα σας'
  },
  
  es: {
    // Navigation
    'chapitre-1': 'El Niño de la Profecía',
    'chapitre-2': 'El Choque de los Titanes',
    
    // Chapter 1
    'intro-text': 'Me contaron que mis abuelos, Gaia y Urano, habían creado a los Titanes.',
    'ambiance-text': 'Un día, decidió que su padre sobraba y lo derrocó para tomar su lugar. Ahí lo tienen. Bonito ambiente familiar, ¿no?',
    'prophecy-intro': 'Pero justo después de eso, Gaia le lanzó la frase que arruinó todas sus noches:',
    'prophecy-text': 'Uno de tus hijos será más fuerte que tú.',
    'obsession-text': 'Y ahí, créanme, mi padre no pensó en nada más. Ni en besos, ni en cumpleaños... Solo en su futura derrota.',
    'siblings-text': 'Mis hermanos nacían, y mi padre los hacía desaparecer de inmediato. Uno, dos, tres, cuatro, cinco. Mi madre Rea lloraba, pero guardaba silencio.',
    'rhea-decision': 'Nunca más.',
    'birth-text': 'Nací en una cueva oscura en Creta. Con una cabra sagrada como niñera, Amaltea, y guerreros, los Curetes, que golpeaban sus escudos para cubrir mis llantos.',
    'stone-trick': 'Mientras tanto, mi madre le entregaba a Cronos una piedra envuelta en tela para hacerle creer que era yo. Lo creyó. Gracias a este engaño, pude crecer con seguridad.',
    
    // Chapter 2
    'growing-up': 'Al crecer, pensé: "Ok, Zeus, es hora de actuar". Encontré a Metis, la oceánide más astuta de todas.',
    'potion-text': 'Metis me dio una poción que haría vomitar a un gigante. Me disfracé de sirviente y se la serví a Cronos.',
    'vomit-text': 'Regurgitó a mis hermanos: Hestia, Deméter, Hera, Hades y Poseidón. Pero aún no teníamos la fuerza para vencer a los Titanes.',
    'tartarus-text': 'Por consejo de Gaia, descendí al Tártaro, donde Cronos había encerrado a los Cíclopes y a los Hecatónquiros. Rompí sus cadenas, y a cambio...',
    'weapons-text': 'nos ofrecieron tres armas increíbles:\n\nmi rayo,\n\nel tridente,\n\nel casco de sombras.',
    'lightning-text': 'Lancé mis rayos,',
    'end-battle': 'Cuando terminó la batalla, los Titanes estaban de rodillas.\n\nNo queríamos que pudieran volver a hacerle daño a nadie.\nAsí que los encadenamos y los enviamos a las profundidades del Tártaro',
    'division-text': 'Una vez terminada la batalla, nos reunimos los tres para decidir quién gobernaría qué.\n\nElegimos un sorteo, simple y sin trampas ya habíamos tenido suficientes conflictos así.',
    'realms-text': 'Poseidón heredó el Mar,\nHades el Inframundo,\ny yo, el Cielo.',
    
    // Language modal
    'choose-language': 'Elige tu idioma'
  },
  
  ar: {
    // Navigation
    'chapitre-1': 'طفل النبوءة',
    'chapitre-2': 'صدام الجبابرة',
    
    // Chapter 1
    'intro-text': 'قيل لي أن أجدادي، غايا وأورانوس، خلقوا الجبابرة.',
    'ambiance-text': 'في يوم من الأيام، قرر أن والده كان كثيرًا وأطاح به ليأخذ مكانه. ها أنت ذا. أجواء عائلية لطيفة، أليس كذلك؟',
    'prophecy-intro': 'لكن بعد ذلك مباشرة، ألقت عليه غايا العبارة التي دمرت كل لياليه:',
    'prophecy-text': 'أحد أطفالك سيكون أقوى منك.',
    'obsession-text': 'وهناك، صدقوني، لم يفكر والدي في أي شيء آخر. لا قبلات، لا أعياد ميلاد... فقط هزيمته المستقبلية.',
    'siblings-text': 'ولد إخوتي وأخواتي، وجعلهم والدي يختفون على الفور. واحد، اثنان، ثلاثة، أربعة، خمسة. بكت أمي ريا، لكنها صمتت.',
    'rhea-decision': 'أبدا مرة أخرى.',
    'birth-text': 'ولدت في كهف مظلم في جزيرة كريت. مع ماعز مقدسة كمربية، أمالثيا، ومحاربين، الكوريتيس، الذين كانوا يضربون دروعهم لتغطية بكائي.',
    'stone-trick': 'في هذه الأثناء، سلمت أمي كرونوس حجرًا ملفوفًا بقماش لتجعله يعتقد أنه أنا. صدق ذلك. بفضل هذه الحيلة، تمكنت من النمو بأمان.',
    
    // Chapter 2
    'growing-up': 'عندما كبرت، فكرت: "حسنًا، زيوس، حان وقت التصرف". وجدت ميتيس، أكثر محيطية ماكرة على الإطلاق.',
    'potion-text': 'أعطتني ميتيس جرعة من شأنها أن تجعل عملاقًا يتقيأ. تنكرت كخادم وقدمتها لكرونوس.',
    'vomit-text': 'تقيأ إخوتي وأخواتي: هيستيا، ديميتر، هيرا، هاديس وبوسيدون. لكن لم يكن لدينا بعد القوة لهزيمة الجبابرة.',
    'tartarus-text': 'بنصيحة من غايا، نزلت إلى تارتاروس، حيث سجن كرونوس السيكلوبس والهيكاتونكيريس. كسرت سلاسلهم، وفي المقابل...',
    'weapons-text': 'قدموا لنا ثلاثة أسلحة لا تصدق:\n\nصاعقتي،\n\nالثلاثي الشوكة،\n\nخوذة الظل.',
    'lightning-text': 'ألقيت صواعقي،',
    'end-battle': 'عندما انتهت المعركة، كان الجبابرة على ركبهم.\n\nلم نرد أن يتمكنوا من إيذاء أي شخص مرة أخرى.\nلذلك قيدناهم وأرسلناهم إلى أعماق تارتاروس',
    'division-text': 'بمجرد انتهاء المعركة، اجتمعنا الثلاثة لنقرر من سيحكم ماذا.\n\nاخترنا قرعة، بسيطة وبدون غش كنا قد مررنا بما يكفي من الصراعات هكذا.',
    'realms-text': 'ورث بوسيدون البحر،\nهاديس العالم السفلي،\nوأنا، السماء.',
    
    // Language modal
    'choose-language': 'اختر لغتك'
  },
  
  zh: {
    // Navigation
    'chapitre-1': '预言之子',
    'chapitre-2': '泰坦之战',
    
    // Chapter 1
    'intro-text': '有人告诉我，我的祖父母盖亚和乌拉诺斯创造了泰坦。',
    'ambiance-text': '有一天，他决定他的父亲太多余了，推翻了他以取代他的位置。就是这样。很好的家庭氛围，对吧？',
    'prophecy-intro': '但就在那之后，盖亚向他抛出了毁掉他所有夜晚的短语：',
    'prophecy-text': '你的一个孩子会比你更强大。',
    'obsession-text': '在那里，相信我，我父亲什么都不想了。没有亲吻，没有生日......只有他未来的失败。',
    'siblings-text': '我的兄弟姐妹出生了，我父亲立即让他们消失了。一个，两个，三个，四个，五个。我的母亲瑞亚哭了，但保持沉默。',
    'rhea-decision': '再也不会了。',
    'birth-text': '我出生在克里特岛的一个黑暗洞穴中。有一只神圣的山羊作为保姆，阿玛尔忒亚，还有战士，库瑞忒斯，他们敲打盾牌来掩盖我的哭声。',
    'stone-trick': '与此同时，我的母亲递给克洛诺斯一块用布包裹的石头，让他相信那是我。他相信了。多亏了这个诡计，我才能安全地长大。',
    
    // Chapter 2
    'growing-up': '长大后，我想："好吧，宙斯，是时候行动了。"我找到了墨提斯，最狡猾的海洋女神。',
    'potion-text': '墨提斯给了我一剂会让巨人呕吐的药水。我伪装成仆人，把它端给克洛诺斯。',
    'vomit-text': '他吐出了我的兄弟姐妹：赫斯提亚、德墨忒尔、赫拉、哈迪斯和波塞冬。但我们仍然没有力量打败泰坦。',
    'tartarus-text': '根据盖亚的建议，我下降到塔尔塔洛斯，克洛诺斯在那里囚禁了独眼巨人和百臂巨人。我打破了他们的锁链，作为回报......',
    'weapons-text': '他们为我们提供了三件令人难以置信的武器：\n\n我的闪电，\n\n三叉戟，\n\n阴影头盔。',
    'lightning-text': '我投掷了我的闪电，',
    'end-battle': '当战斗结束时，泰坦们跪在地上。\n\n我们不想让他们再次伤害任何人。\n所以我们把他们锁起来，送到塔尔塔洛斯的深处',
    'division-text': '战斗结束后，我们三个人聚在一起决定谁将统治什么。\n\n我们选择了抽签，简单而不作弊我们已经有足够的冲突了。',
    'realms-text': '波塞冬继承了大海，\n哈迪斯继承了冥界，\n而我，天空。',
    
    // Language modal
    'choose-language': '选择您的语言'
  }
};

// Fonction pour appliquer les traductions
function applyTranslations(lang) {
  const t = translations[lang];
  
  // Appliquer les traductions pour tous les éléments avec data-translate
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    if (t[key]) {
      // Gérer les balises <br> et <button> dans le texte
      if (element.innerHTML.includes('<button') || element.innerHTML.includes('<br')) {
        // Conserver les boutons et les sauts de ligne
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = element.innerHTML;
        
        // Remplacer uniquement le texte
        const textNodes = [];
        const walker = document.createTreeWalker(tempDiv, NodeFilter.SHOW_TEXT);
        let node;
        while (node = walker.nextNode()) {
          textNodes.push(node);
        }
        
        // Simple remplacement si pas de structure complexe
        if (textNodes.length === 1) {
          element.childNodes.forEach(child => {
            if (child.nodeType === Node.TEXT_NODE) {
              child.textContent = t[key];
            }
          });
        }
      } else {
        // Remplacement simple pour les éléments sans HTML
        element.textContent = t[key];
      }
    }
  });
  
  // Appliquer la typographie grecque
  applyGreekTypography(lang);
  
  // Sauvegarder la langue sélectionnée
  localStorage.setItem('selectedLanguage', lang);
}

// Fonction pour appliquer la typographie grecque
function applyGreekTypography(lang) {
  const body = document.body;
  
  // Retirer toutes les classes de langue
  body.classList.remove('lang-fr', 'lang-en', 'lang-el', 'lang-es', 'lang-ar', 'lang-zh');
  
  // Ajouter la classe de langue actuelle
  body.classList.add(`lang-${lang}`);
  
  // Pour le grec, changer la police des titres
  if (lang === 'el') {
    document.documentElement.style.setProperty('--font-title', 'spartacus');
  } else {
    document.documentElement.style.setProperty('--font-title', 'Archides');
  }
}

// Initialisation
document.addEventListener('DOMContentLoaded', () => {
  // Charger la langue sauvegardée ou utiliser le français par défaut
  const savedLang = localStorage.getItem('selectedLanguage') || 'fr';
  applyTranslations(savedLang);
  
  // Ajouter les événements de clic sur les boutons de langue
  const languageButtons = {
    'Francais': 'fr',
    'English': 'en',
    'ελληνικά': 'el',
    'español': 'es',
    'اللغة العربية': 'ar',
    '中國': 'zh'
  };
  
  document.querySelectorAll('.secondary-button').forEach(button => {
    button.addEventListener('click', () => {
      const buttonText = button.querySelector('p').textContent;
      const lang = languageButtons[buttonText];
      
      if (lang) {
        applyTranslations(lang);
        
        // Fermer la modal
        const modal = document.querySelector('.langue-modal-overlay');
        if (modal) {
          modal.classList.remove('active');
        }
      }
    });
  });
});

// Exporter pour utilisation dans d'autres fichiers
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { translations, applyTranslations };
}